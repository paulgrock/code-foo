<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
	<title>Sony PlayStation 3 (PS3) Games, Cheats, Walkthroughs, News, Reviews, Previews, Game Trailers & Videos - IGN</title>
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.css" />
	<script src="http://code.jquery.com/jquery-1.6.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.js"></script>
	<link rel="stylesheet" href="ign.css" />
</head>
<body id="main">
	<div data-role="page" id="ps3">	
		<header data-role="header">
			<h1><img src="IGN.png" alt="Video Games, Cheats, Walkthroughs, Game Trailers, Reviews, News, Previews & Videos at IGN" /></h1>
			<a href="#" data-role="back-btn" data-icon="arrow-l" data-rel="back">Back</a>
		</header>
		<section data-role="content">
			<ul id="articlesHolder" data-role="listview" data-theme="b" data-filter='true'>

			</ul>
		</section>
		<footer data-role="footer">
			<p>Developed by @paulgrock for IGN's Code-Foo Challenge</p>
		</footer>
	<script id="articles" type="text/x-jquery-tmpl">
		<li class="ui-btn ui-btn-hover-b ui-btn-down-b ui-btn-icon-right ui-li ui-li-has-thumb">
			<div class="ui-btn-inner ui-li">
				<div class="ui-btn-text">
					<a href="${link}" class="ui-link-inherit">
						<img src="${image}" class="ui-li-thumb" />
						<h3 class="ui-li-heading">${title}</h3>
						<p class="ui-li-desc">${description}</p>
					</a>
				</div>
				<span class="ui-icon ui-icon-arrow-r"></span>
			</div>
		</li>
	</script>
	<script src="js/jquery.tmpl.min.js"></script>
	<script>
		function yqlQuery(query, callback){
			var yqlURL = "http://query.yahooapis.com/v1/public/yql";
			var data = {
				q: query,
				format: 'json'
			}
			
			$.get(yqlURL, data, callback, 'jsonp');
		}
		yqlQuery("select * from feed where  url='http://feeds.ign.com/ignfeeds/" + 'ps3/' + "'", function(resp){
				var items = resp.query.results.item,
					imgSrc;
				var	article = $.map(items, function(obj, index){
					var origDesc = obj.description;
					if($(obj.description).find('img').length){
						imgSrc = $(obj.description).find('img').attr('src');
					} else {
						imgSrc = "IGN-logo.png";
					}
					return {
						title: obj.title,
						link: obj.link,
						description: $(obj.description).filter('p:last').text(),
						image: imgSrc
					}
				});
				$("#articles").tmpl(article).appendTo('#articlesHolder');
			});
	</script>
</div>
</body>
</html>